// manager.js (basic)
document.addEventListener('DOMContentLoaded', ()=>{ if (location.pathname.endsWith('manager.html')) initManager(); });
async function initManager(){ document.getElementById('logoutBtn').addEventListener('click', ()=>auth.signOut()); auth.onAuthStateChanged(async user=>{ if(!user) return window.location='index.html'; const meta=(await db.collection('users').doc(user.uid).get()).data(); document.getElementById('managerInfo').textContent = user.email + ' â€” ' + (meta.floor||''); // load manager allowed data
  const snap = await db.collection('entries').where('floor','==',meta.floor).orderBy('timestamp','desc').get(); const rows=[]; snap.forEach(d=>{ const data=d.data(); (data.rows||[]).forEach(r=>rows.push({Date:data.date,Item:r.item,Qty:r.qty,Counter:data.counter})); }); document.getElementById('mgrData').innerHTML=''; if(rows.length) document.getElementById('mgrData').appendChild(createTableFromArray([{key:'Date',label:'Date'},{key:'Counter',label:'Counter'},{key:'Item',label:'Item'},{key:'Qty',label:'Qty'}], rows)); }); }